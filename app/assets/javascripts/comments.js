// Generated by CoffeeScript 1.6.3
var source;

source = new EventSource('/comments');

source.onmessage = function(event) {
  var comment, comment_template;
  comment_template = _.template($('#comment_temp').html());
  comment = $.parseJSON(event.data);
  if (comment) {
    return $('#comments').find('.media-list').prepend(comment_template({
      body: comment['body'],
      user_name: comment['user_name'],
      user_avatar: comment['user_avatar'],
      user_profile: comment['user_profile'],
      timestamp: comment['timestamp']
    }));
  }
};

jQuery(function() {
  return $('#new_comment').submit(function() {
    return $(this).find("input[type='submit']").val('Sending...').prop('disabled', true);
  });
});
